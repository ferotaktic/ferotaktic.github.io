<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fero Sic Bo â€” KaranlÄ±k Cam ArayÃ¼z</title>
<meta name="color-scheme" content="dark" />
<meta name="description" content="Fero Sic Bo â€” Small/Big iÃ§in Ã–ÄŸrenen Ã‡ekirdek v2 (Flip-Flop Hold, 2xRule, Bandit-Decay, Auto-Unit, Histerezis Kilit) ve detaylÄ± aÃ§Ä±klamalar."/>
<style>
  :root{
    --bg-1:#070b18; --bg-2:#0a1226; --bg-3:#0d1833;
    --glass:#0e1730aa; --border:#2a3b66cc;
    --accent:#7c5cff; --accent-2:#22e3a2;
    --text:#eaf1ff; --muted:#a6b3d2; --radius:18px;
    --danger:#ff6b6b; --ok:#22e3a2;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;color:var(--text);font:600 15px/1.5 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial;
    background:
      radial-gradient(1200px 800px at 10% -10%, #1a2455 0%, transparent 55%),
      radial-gradient(1200px 800px at 110% 10%, #0e3a2f 0%, transparent 55%),
      linear-gradient(180deg, var(--bg-1), var(--bg-2) 40%, var(--bg-3));
    overflow-x:hidden}
  .stars,.stars:after{content:"";position:fixed;inset:0;pointer-events:none;z-index:0;
    background-image:
      radial-gradient(2px 2px at 20% 30%, #ffffff33 0, transparent 60%),
      radial-gradient(1px 1px at 70% 60%, #ffffff22 0, transparent 60%),
      radial-gradient(1.5px 1.5px at 40% 80%, #ffffff28 0, transparent 60%),
      radial-gradient(1px 1px at 85% 25%, #ffffff1f 0, transparent 60%);
    animation:twinkle 9s linear infinite}
  .stars:after{animation-duration:13s;opacity:.7;filter:blur(.3px)}
  @keyframes twinkle{0%,100%{opacity:.65}50%{opacity:.95}}
  .wrap{min-height:100dvh;display:grid;place-items:center;padding:28px;position:relative;z-index:1}
  .brand{display:flex;align-items:center;gap:12px;margin-bottom:14px;opacity:.95;text-transform:uppercase;letter-spacing:.16em;font-weight:800;font-size:12px;color:var(--muted)}
  .brand .dot{width:8px;height:8px;border-radius:999px;background:linear-gradient(135deg,var(--accent),var(--accent-2))}
  .card{width:100%;max-width:820px;border:1px solid var(--border);border-radius:var(--radius);
    background:linear-gradient(180deg,#0e1630cc,#0b1328cc);backdrop-filter:blur(12px) saturate(110%);
    box-shadow:0 18px 60px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.04);padding:26px;position:relative}
  .card:before{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;
    background:linear-gradient(90deg,transparent,rgba(124,92,255,.22),rgba(34,227,162,.18),transparent);
    mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    padding:1px;border-radius:inherit;opacity:.7}
  h1{margin:6px 0 10px;font-size:28px;line-height:1.15;letter-spacing:.2px;font-weight:900;text-shadow:0 8px 32px rgba(124,92,255,.25)}
  .tagline{color:var(--muted);font-weight:600;margin:0 0 22px}
  .btn{display:flex;gap:14px;align-items:center;justify-content:flex-start;text-decoration:none;color:var(--text);position:relative;
    border:1px solid #2a3b66;border-radius:16px;padding:16px;background:linear-gradient(180deg,#172346,#121f3d);
    box-shadow:inset 0 1px 0 rgba(255,255,255,.05),0 10px 24px rgba(0,0,0,.35);transition:transform .18s ease,box-shadow .18s ease,filter .18s ease,border-color .18s ease}
  .btn .emoji{font-size:22px;filter: drop-shadow(0 6px 12px rgba(124,92,255,.35));width:40px;height:40px;display:grid;place-items:center;background:linear-gradient(135deg,#221f4f,#162a44);border:1px solid #344a83;border-radius:12px}
  .btn .txt{display:flex;flex-direction:column;gap:2px}
  .btn .txt b{font-size:16px;letter-spacing:.2px}
  .btn .txt small{color:var(--muted);font-weight:600}
  .btn .badge{position:absolute;right:12px;top:12px;font-size:11px;font-weight:900;letter-spacing:.06em;padding:6px 8px;border-radius:999px;color:#0b1220;background:linear-gradient(135deg,var(--accent),var(--accent-2))}
  .btn:focus-visible{outline:3px solid rgba(124,92,255,.6);outline-offset:2px}
  .btn:hover{transform:translateY(-2px) scale(1.01);border-color:#3a58a8;filter:brightness(1.06);box-shadow:0 16px 32px rgba(0,0,0,.45),0 0 0 2px rgba(124,92,255,.1)}
  .btn:active{transform:translateY(0) scale(.995)}
  .notice{display:flex;gap:12px;align-items:flex-start;background:linear-gradient(180deg,#0f1c36,#0b1529);
    border:1px dashed #2a3b66;border-radius:14px;padding:12px 14px;color:#cfd8ff;margin:16px 0}
  .notice .icon{font-size:18px;margin-top:1px}
  .notice b{color:#fff}
  .info{display:grid;gap:12px;margin-top:10px}
  details{border:1px solid #2a3b66;border-radius:14px;padding:12px 14px;background:linear-gradient(180deg,#121d38,#0d1730)}
  summary{cursor:pointer;font-weight:900;letter-spacing:.2px;display:flex;align-items:center;gap:8px;list-style:none}
  summary::-webkit-details-marker{display:none}
  .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid #2a3b66;border-radius:999px;background:#0b1529;color:#a6b3d2;font-weight:800;font-size:12px}
  .cols{display:grid;gap:10px}
  @media(min-width:720px){.cols{grid-template-columns:1fr 1fr}}
  ul{margin:10px 0 0 16px;padding:0} li{margin:6px 0}
  code{background:#0a1327;border:1px solid rgba(255,255,255,.12);padding:2px 6px;border-radius:8px;font-family:ui-monospace,Consolas,monospace;font-weight:700;color:#cfe2ff}
  .foot{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-top:18px;color:var(--muted);font-weight:600;flex-wrap:wrap}
  .chip{display:inline-flex;gap:8px;align-items:center;padding:8px 10px;border-radius:999px;border:1px solid #2a3b66;background:linear-gradient(180deg,#121d38,#0d1730)}
  .chip .dot{width:8px;height:8px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent-2))}
  .tilt{transform-style:preserve-3d;perspective:800px}

  /* === Åifre ModalÄ± === */
  .modal{position:fixed;inset:0;background:rgba(3,6,20,.65);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;z-index:50}
  .modal.open{display:flex}
  .modal-card{width:min(92vw,440px);background:linear-gradient(180deg,#0d1730,#0a1226);
    border:1px solid #2a3b66;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.55);padding:18px}
  .modal-title{font-weight:900;font-size:18px;margin:0 0 8px}
  .modal-sub{color:var(--muted);font-size:12px;margin-bottom:10px}
  .field{display:flex;gap:8px}
  .input{flex:1;background:#0a1327;border:1px solid rgba(255,255,255,.12);color:#fff;padding:10px 12px;border-radius:12px;min-height:44px;font-size:14px}
  .mbtn{border:none;border-radius:12px;padding:10px 14px;font-weight:900;min-height:44px;cursor:pointer;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#051025}
  .mghost{background:transparent;border:1px solid rgba(255,255,255,.15);color:#eaf1ff}
  .err{margin-top:8px;font-size:12px;color:var(--danger);min-height:16px}
  .ok{color:var(--ok)}
  @keyframes shake{10%,90%{transform:translateX(-2px)}20%,80%{transform:translateX(4px)}30%,50%,70%{transform:translateX(-6px)}40%,60%{transform:translateX(6px)}}
  .shake{animation:shake .4s both}
</style>
</head>
<body>
  <div class="stars"></div>

  <main class="wrap">
    <div class="card tilt" id="panel">
      <div class="brand"><span class="dot"></span> Fero â€” Sic Bo</div>
      <h1>ğŸ² Sic Bo â€¢ Small/Big â€¢ Ã–ÄŸrenen Ã‡ekirdek v2</h1>
      <p class="tagline">
        Flip-Flop Hold â€¢ <b>2xRule</b> â€¢ Bandit-Decay (Trend vs Mean) â€¢ Histerezis Kilit â€¢ Auto-Unit â€¢ Dinamik Stake Guardrail
      </p>

      <!-- Tek seÃ§enek: Sic Bo (ArtÄ±k JS ile yakalanacak) -->
      <a id="enterBtn" class="btn" href="fero-sicbo.html" data-href="fero-sicbo.html" rel="noopener">
        <span class="emoji">ğŸ²</span>
        <span class="txt">
          <b>Fero Sic Bo'ya Gir</b>
          <small>KÃ¼Ã§Ã¼k/BÃ¼yÃ¼k Ã¶neri motoru, KPI'lar, warm-up ve simÃ¼lasyon</small>
        </span>
        <span class="badge">SICBO</span>
      </a>

      <div class="notice">
        <div class="icon">ğŸ’¡</div>
        <div>
          <!-- ğŸ“˜ NASIL OYNANIR (EN ÃœSTE EKLE) -->
<details id="howto" open style="border:1px solid #2a3b66;border-radius:14px;padding:12px 14px;background:linear-gradient(180deg,#121d38,#0d1730);margin:10px 0 18px">
  <summary style="cursor:pointer;font-weight:900;letter-spacing:.2px;display:flex;align-items:center;gap:8px;list-style:none">
    ğŸ“˜ NasÄ±l OynanÄ±r (AdÄ±m AdÄ±m)
  </summary>

  <div style="display:grid;gap:10px;margin-top:8px">
    <ol style="margin:0 0 0 18px;padding:0">
      <li><b>GiriÅŸ:</b> â€œFero Sic Boâ€™ya Girâ€ butonuna tÄ±kla. Åifre istendiÄŸinde doÄŸru ÅŸifreyi girerek iÃ§eri geÃ§.</li>
      <li><b>Warm-up (Kalibrasyon):</b> Ä°lk ekranda <b>son 10 elin gerÃ§ek sonuÃ§larÄ±nÄ±</b> sÄ±rayla gir. Bu adÄ±m,
        motorun kÄ±sa dÃ¶nem dengesini yakalamasÄ± iÃ§in zorunludur. Tamamlanmadan Ã¶neri aÃ§Ä±lmaz.</li>
      <li><b>El KaydÄ±:</b> Her el bittiÄŸinde Ã§Ä±kan sonuca gÃ¶re <b>Small</b>, <b>Big</b> ya da <b>Tie</b> butonuna bas.
        Sistem bu verilerden Ã¶ÄŸrenir ve bir sonraki el iÃ§in <b>â€œDur / KÃ¼Ã§Ã¼ÄŸe Oyna / BÃ¼yÃ¼ÄŸe Oynaâ€</b> Ã¶nerisi ile
        <b>stake</b> miktarÄ±nÄ± otomatik hesaplar.</li>
      <li><b>Ã–neri MantÄ±ÄŸÄ± (Ã–zet):</b>
        <ul style="margin:6px 0 0 16px">
          <li><b>2xRule:</b> Son iki aynÄ± yÃ¶n gelmiÅŸse aynÄ± yÃ¶ne Ã¶ncelik verir.</li>
          <li><b>Flip-Flop Hold:</b> KÃ¼Ã§Ã¼k-BÃ¼yÃ¼k dÃ¶nÃ¼ÅŸÃ¼mlÃ¼ dalgalanma tespitinde geÃ§ici olarak <b>bekler</b>.</li>
          <li><b>Trend vs Mean:</b> Mini trend ile ortalamaya dÃ¶nÃ¼ÅŸ adayÄ± birlikteyse, <b>Thompson Sampling</b> ile seÃ§im yapÄ±lÄ±r.</li>
          <li><b>Histerezis Kilit:</b> Uzayan seri yÃ¶nÃ¼nde kilitler; karÅŸÄ± sinyal eÅŸiÄŸi/durumunda Ã§Ã¶zÃ¼lÃ¼r.</li>
        </ul>
      </li>
      <li><b>Stake (Bahis) YÃ¶netimi:</b>
        <ul style="margin:6px 0 0 16px">
          <li><b>Auto-Unit (u):</b> BaÅŸlangÄ±Ã§ bankÄ±nÄ±n yaklaÅŸÄ±k %0.6â€™sÄ±ndan tÃ¼retilir; kÄ±sa vadeli kazanÄ±m oranÄ±na gÃ¶re mikro ayar yapÄ±lÄ±r.</li>
          <li><b>KayÄ±p SonrasÄ±:</b> Drawdownâ€™a gÃ¶re hedefe yaklaÅŸan kontrollÃ¼ artÄ±ÅŸ (<b>tek elde â‰¤ 2u</b> ve <b>â‰¤ %35</b>; kilitte %25).</li>
          <li><b>KazanÃ§ SonrasÄ±:</b> HWM (tepe) korunur, kÃ¢rdayken stake nazikÃ§e kÃ¼Ã§Ã¼ltÃ¼lÃ¼r ve dÃ¶ngÃ¼ sonunda tekrar <b>u</b>â€™ya dÃ¶ner.</li>
        </ul>
      </li>
      <li><b>KPIâ€™larÄ± Okuma:</b>
        <ul style="margin:6px 0 0 16px">
          <li><b>Ã–neri (Bu El):</b> O anki yÃ¶n talimatÄ±.</li>
          <li><b>Bank / HWM:</b> Mevcut kasa ve ulaÅŸÄ±lan tepe deÄŸer.</li>
          <li><b>Stake (SÄ±radaki) & Dinamik Taban (u):</b> Bir sonraki el iÃ§in miktar ve dinamik birim.</li>
          <li><b>W/L, PnL, KayÄ±p Serisi:</b> Kazan/kaybet sayÄ±sÄ±, toplam kÃ¢r/zarar ve ardÄ±ÅŸÄ±k kayÄ±p uzunluÄŸu.</li>
          <li><b>WinRate(20) & GÃ¶lge PnL:</b> Son 20 bahisli el baÅŸarÄ± yÃ¼zdesi ve â€œkarÅŸÄ± yÃ¶n olsaydÄ±â€ varsayÄ±msal sonuÃ§.</li>
        </ul>
      </li>
      <li><b>GeÃ§miÅŸ Tablosu:</b> Her turda <b>Kaynak</b> (PAIR/LOCK/TREND/MEAN/PAUSE), <b>Ã–neri</b>, <b>GerÃ§ek</b>,
        <b>Bahis</b>, <b>SonuÃ§</b>, <b>Net</b>, <b>Bank</b> bilgileri tutulur. Bu tabloyla strateji akÄ±ÅŸÄ±nÄ± izleyebilirsin.</li>
      <li><b>Toplu Ä°Ã§e AktarÄ±m (Opsiyonel):</b> El sonuÃ§larÄ±nÄ± tek satÄ±rda <b>small/big/tie</b> biÃ§iminde yapÄ±ÅŸtÄ±rÄ±p simÃ¼le edebilirsin.
        Bu, algoritmayÄ± hÄ±zla â€œÄ±sÄ±ndÄ±rmakâ€ iÃ§in idealdir.</li>
      <li><b>Geri Al / Temizle:</b> HatalÄ± kayÄ±t durumunda <b>Geri Al</b>, gerektiÄŸinde <b>TÃ¼m KayÄ±tlarÄ± Sil</b> ile sÄ±fÄ±rdan baÅŸla.</li>
      <li><b>Ayarlar:</b> Sadece <b>BaÅŸlangÄ±Ã§ Bank</b> girmen yeterli; <b>u</b> otomatik seÃ§ilir. Risk yÃ¶netimi ve yÃ¶n Ã¶nerisi tamamen otomatiktir.</li>
      <li><b>Pratik Ä°puÃ§larÄ±:</b>
        <ul style="margin:6px 0 0 16px">
          <li>Warm-upâ€™Ä± atlama; kÄ±sa dÃ¶nem dengesi doÄŸru kurulmadÄ±ÄŸÄ±nda Ã¶neri kalitesi dÃ¼ÅŸer.</li>
          <li>Uzun seri/kilit anlarÄ±nda acele stake artÄ±rma; guardrail sÄ±nÄ±rlarÄ± zaten artÄ±ÅŸÄ± kademeli tutar.</li>
          <li>GÃ¶lge PnLâ€™i izleyerek strateji tercihlerinin alternatifine gÃ¶re farkÄ±nÄ± Ã¶lÃ§.</li>
        </ul>
      </li>
    </ol>
  </div>
</details>
      </div>

      <!-- DetaylÄ± Bilgi â€” (kÄ±saltÄ±lmadÄ±) -->
      <section class="info">
        <details open>
          <summary>ğŸ§  Ã–ÄŸrenen Ã‡ekirdek v2 â€” BileÅŸenler</summary>
          <div class="cols">
            <div>
              <div class="pill">Flip-Flop Hold</div>
              <ul><li>Son 4 sinyal <code>Small-Big-Small-Big</code> ise iki aynÄ± gÃ¶rÃ¼lene kadar bekler.</li></ul>
              <div class="pill">2xRule (Ã–ncelik)</div>
              <ul><li>ArdÄ±ÅŸÄ±k iki aynÄ± yÃ¶n gÃ¶rÃ¼lÃ¼rse o tarafa Ã¶ncelik verir.</li></ul>
              <div class="pill">Z-Skor (Mean-Revert)</div>
              <ul>
                <li><b>W_SIGNAL</b> penceresinde z-skor hesaplar; eÅŸik <code>Z_THR</code> adaptif.</li>
              </ul>
            </div>
            <div>
              <div class="pill">Trend vs Mean â€” Thompson Sampling</div>
              <ul><li>Ä°ki aday da varsa Beta Ã§ekiliÅŸiyle seÃ§im yapar; decay uygulanÄ±r.</li></ul>
              <div class="pill">Histerezis Kilit</div>
              <ul><li>Mini-seride kilit kurar; karÅŸÄ± sinyal eÅŸiÄŸi dolana kadar sÃ¼rdÃ¼rÃ¼r.</li></ul>
              <div class="pill">Warm-up & Pencereler</div>
              <ul><li><b>MIN_WARMUP=10</b>, <b>W_WINRATE=20</b>.</li></ul>
            </div>
          </div>
        </details>

        <details>
          <summary>ğŸ’µ Stake Sistemi â€” Auto-Unit & Guardrail</summary>
          <ul>
            <li>BaÅŸlangÄ±Ã§ bankÄ±nÄ±n â‰ˆ %0.6â€™sÄ±ndan tÃ¼retilen <b>u</b>; kÄ±sa vadeli win-rate ile mikro ayar.</li>
            <li>KayÄ±pta hedefe yaklaÅŸÄ±m; tek elde <code>â‰¤2u</code> ve <code>â‰¤%35</code> artÄ±ÅŸ sÄ±nÄ±rÄ± (kilitte %25).</li>
          </ul>
        </details>

        <details>
          <summary>ğŸ“Š KPIâ€™lar & Tablo</summary>
          <ul><li>Ã–neri, Bank, Stake(u), HWM, W/L, PnL, KayÄ±p Serisi, WinRate(20), GÃ¶lge PnL vb.</li></ul>
        </details>

        <details>
          <summary>âš ï¸ Not</summary>
          <ul><li>Bu araÃ§ eÄŸitim/analiz amaÃ§lÄ±dÄ±r; ÅŸans oyunlarÄ±nda garanti yoktur.</li></ul>
        </details>
      </section>

      <footer class="foot">
        <span class="chip"><span class="dot"></span> KaranlÄ±k Cam ArayÃ¼z</span>
        <span class="chip">Fero Sic Bo â€¢ v1.1 â€¢ ÅŸifre korumalÄ±</span>
      </footer>
    </div>
  </main>

  <!-- === Åifre ModalÄ± === -->
  <div id="pwModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal-card" id="modalCard">
      <div class="modal-title">ğŸ” GiriÅŸ Åifresi</div>
      <div class="modal-sub">Devam etmek iÃ§in ÅŸifreyi gir.</div>
      <form id="pwForm" class="field" autocomplete="off">
        <input id="pwInput" class="input" type="password" inputmode="text" placeholder="Åifre" required />
        <button class="mbtn" type="submit">GiriÅŸ</button>
        <button class="mbtn mghost" type="button" id="pwCancel">Ä°ptal</button>
      </form>
      <div id="pwErr" class="err" aria-live="polite"></div>
    </div>
  </div>

  <!--
    
  -->
  <template id="sec">
    {"p":["e3dd0e0e","b0234e46","f5fab0bf","96518d4a","eeeb8ef9","7499e624","989db1bc","d782f05f"],"o":[2,4,1,6,7,5,3,0],"s":"Fero@2025!"}
  </template>

<script>
  // Hafif 3D tilt (mobilde devre dÄ±ÅŸÄ±)
  (() => {
    const card = document.getElementById('panel');
    const isTouch = matchMedia('(pointer: coarse)').matches;
    if (!card || isTouch) return;
    const strength = 10; let raf = null;
    const onMove = (e) => {
      const rect = card.getBoundingClientRect();
      const x = (e.clientX - rect.left) / rect.width;
      const y = (e.clientY - rect.top) / rect.height;
      const rY = (x - 0.5) * strength; const rX = (0.5 - y) * strength;
      cancelAnimationFrame(raf);
      raf = requestAnimationFrame(() => { card.style.transform = `rotateX(${rX}deg) rotateY(${rY}deg)`; });
    };
    const reset = () => { cancelAnimationFrame(raf); card.style.transform = 'rotateX(0deg) rotateY(0deg)'; };
    card.addEventListener('mousemove', onMove, {passive:true});
    card.addEventListener('mouseleave', reset, {passive:true});
  })();

  // ===== Åifre Kilidi =====
  (()=>{
    const btn = document.getElementById('enterBtn');
    const modal = document.getElementById('pwModal');
    const form = document.getElementById('pwForm');
    const input = document.getElementById('pwInput');
    const err = document.getElementById('pwErr');
    const cancel = document.getElementById('pwCancel');
    const modalCard = document.getElementById('modalCard');
    const DEST = btn?.dataset?.href || btn?.getAttribute('href') || 'fero-sicbo.html';

    // Oturum aÃ§Ä±k mÄ±? (sayfa yenilemelerinde tekrar sormasÄ±n)
    const KEY = 'fero_sicbo_auth';
    if (sessionStorage.getItem(KEY) === 'ok') {
      // butona basÄ±nca doÄŸrudan geÃ§sin
    }

    // Hash helper (SHA-256 hex)
    async function sha256Hex(txt){
      const enc = new TextEncoder().encode(txt);
      const buf = await crypto.subtle.digest('SHA-256', enc);
      const arr = Array.from(new Uint8Array(buf));
      return arr.map(b=>b.toString(16).padStart(2,'0')).join('');
    }

    // Gizli parÃ§alarÄ± oku ve doÄŸru hash dizisini kur
    function getExpectedHash(){
      try{
        const raw = document.getElementById('sec').content.textContent.trim();
        const json = JSON.parse(raw);
        const p = json.p;         // parÃ§alar (karÄ±ÅŸÄ±k)
        const order = json.o;     // doÄŸru sÄ±ra indexleri
        const salt = json.s;      // salt
        // order sÄ±rasÄ±na gÃ¶re parÃ§alarÄ± birleÅŸtir
        const joined = order.map(i=>p[i]).join('');
        return {hashHex: joined, salt};
      }catch(e){ return {hashHex:'', salt:''}; }
    }

    // GÃ¼venli karÅŸÄ±laÅŸtÄ±rma (zaman sabitine yakÄ±n)
    function equalHexSafe(a,b){
      if (a.length !== b.length) return false;
      let out = 0;
      for (let i=0;i<a.length;i++){ out |= a.charCodeAt(i) ^ b.charCodeAt(i); }
      return out === 0;
    }

    function openModal(){
      modal.classList.add('open');
      modal.setAttribute('aria-hidden','false');
      requestAnimationFrame(()=>input.focus());
    }
    function closeModal(){
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden','true');
      input.value=''; err.textContent='';
    }

    btn.addEventListener('click', (e)=>{
      // EÄŸer oturum onaylÄ±ysa direkt git
      if (sessionStorage.getItem(KEY) === 'ok') return;
      e.preventDefault();
      openModal();
    });

    cancel.addEventListener('click', ()=>{ closeModal(); });

    modal.addEventListener('click', (e)=>{
      if (e.target === modal) closeModal();
    });

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const {hashHex, salt} = getExpectedHash();
      const val = input.value || '';
      err.textContent = 'DoÄŸrulanÄ±yor...';
      const got = await sha256Hex(val + salt);
      if (equalHexSafe(got, hashHex)){
        err.textContent = 'âœ” DoÄŸru ÅŸifre. YÃ¶nlendiriliyor...';
        err.classList.remove('shake'); err.classList.add('ok');
        sessionStorage.setItem(KEY, 'ok');
        // kÃ¼Ã§Ã¼k gecikme -> gÃ¶rsel onay
        setTimeout(()=>{ window.location.href = DEST; }, 250);
      } else {
        err.textContent = 'HatalÄ± ÅŸifre!';
        err.classList.remove('ok'); err.classList.add('shake');
        modalCard.classList.remove('shake'); void modalCard.offsetWidth; modalCard.classList.add('shake');
        input.select();
      }
    });

    // Klavye kaÃ§Ä±ÅŸÄ±
    document.addEventListener('keydown', (e)=>{
      if (e.key === 'Escape' && modal.classList.contains('open')) closeModal();
    });
  })();
</script>
</body>
</html>
