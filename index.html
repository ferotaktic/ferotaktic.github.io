<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fero Sic Bo — Karanlık Cam Arayüz</title>
<meta name="color-scheme" content="dark" />
<meta name="description" content="Fero Sic Bo — Small/Big için Öğrenen Çekirdek v2 (Flip-Flop Hold, 2xRule, Bandit-Decay, Auto-Unit, Histerezis Kilit) ve detaylı açıklamalar."/>
<style>
  :root{
    --bg-1:#070b18; --bg-2:#0a1226; --bg-3:#0d1833;
    --glass:#0e1730aa; --border:#2a3b66cc;
    --accent:#7c5cff; --accent-2:#22e3a2;
    --text:#eaf1ff; --muted:#a6b3d2; --radius:18px;
    --danger:#ff6b6b; --ok:#22e3a2;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;color:var(--text);font:600 15px/1.5 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial;
    background:
      radial-gradient(1200px 800px at 10% -10%, #1a2455 0%, transparent 55%),
      radial-gradient(1200px 800px at 110% 10%, #0e3a2f 0%, transparent 55%),
      linear-gradient(180deg, var(--bg-1), var(--bg-2) 40%, var(--bg-3));
    overflow-x:hidden}
  .stars,.stars:after{content:"";position:fixed;inset:0;pointer-events:none;z-index:0;
    background-image:
      radial-gradient(2px 2px at 20% 30%, #ffffff33 0, transparent 60%),
      radial-gradient(1px 1px at 70% 60%, #ffffff22 0, transparent 60%),
      radial-gradient(1.5px 1.5px at 40% 80%, #ffffff28 0, transparent 60%),
      radial-gradient(1px 1px at 85% 25%, #ffffff1f 0, transparent 60%);
    animation:twinkle 9s linear infinite}
  .stars:after{animation-duration:13s;opacity:.7;filter:blur(.3px)}
  @keyframes twinkle{0%,100%{opacity:.65}50%{opacity:.95}}
  .wrap{min-height:100dvh;display:grid;place-items:center;padding:28px;position:relative;z-index:1}
  .brand{display:flex;align-items:center;gap:12px;margin-bottom:14px;opacity:.95;text-transform:uppercase;letter-spacing:.16em;font-weight:800;font-size:12px;color:var(--muted)}
  .brand .dot{width:8px;height:8px;border-radius:999px;background:linear-gradient(135deg,var(--accent),var(--accent-2))}
  .card{width:100%;max-width:820px;border:1px solid var(--border);border-radius:var(--radius);
    background:linear-gradient(180deg,#0e1630cc,#0b1328cc);backdrop-filter:blur(12px) saturate(110%);
    box-shadow:0 18px 60px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.04);padding:26px;position:relative}
  .card:before{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;
    background:linear-gradient(90deg,transparent,rgba(124,92,255,.22),rgba(34,227,162,.18),transparent);
    mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    padding:1px;border-radius:inherit;opacity:.7}
  h1{margin:6px 0 10px;font-size:28px;line-height:1.15;letter-spacing:.2px;font-weight:900;text-shadow:0 8px 32px rgba(124,92,255,.25)}
  .tagline{color:var(--muted);font-weight:600;margin:0 0 22px}
  .btn{display:flex;gap:14px;align-items:center;justify-content:flex-start;text-decoration:none;color:var(--text);position:relative;
    border:1px solid #2a3b66;border-radius:16px;padding:16px;background:linear-gradient(180deg,#172346,#121f3d);
    box-shadow:inset 0 1px 0 rgba(255,255,255,.05),0 10px 24px rgba(0,0,0,.35);transition:transform .18s ease,box-shadow .18s ease,filter .18s ease,border-color .18s ease}
  .btn .emoji{font-size:22px;filter: drop-shadow(0 6px 12px rgba(124,92,255,.35));width:40px;height:40px;display:grid;place-items:center;background:linear-gradient(135deg,#221f4f,#162a44);border:1px solid #344a83;border-radius:12px}
  .btn .txt{display:flex;flex-direction:column;gap:2px}
  .btn .txt b{font-size:16px;letter-spacing:.2px}
  .btn .txt small{color:var(--muted);font-weight:600}
  .btn .badge{position:absolute;right:12px;top:12px;font-size:11px;font-weight:900;letter-spacing:.06em;padding:6px 8px;border-radius:999px;color:#0b1220;background:linear-gradient(135deg,var(--accent),var(--accent-2))}
  .btn:focus-visible{outline:3px solid rgba(124,92,255,.6);outline-offset:2px}
  .btn:hover{transform:translateY(-2px) scale(1.01);border-color:#3a58a8;filter:brightness(1.06);box-shadow:0 16px 32px rgba(0,0,0,.45),0 0 0 2px rgba(124,92,255,.1)}
  .btn:active{transform:translateY(0) scale(.995)}
  .notice{display:flex;gap:12px;align-items:flex-start;background:linear-gradient(180deg,#0f1c36,#0b1529);
    border:1px dashed #2a3b66;border-radius:14px;padding:12px 14px;color:#cfd8ff;margin:16px 0}
  .notice .icon{font-size:18px;margin-top:1px}
  .notice b{color:#fff}
  .info{display:grid;gap:12px;margin-top:10px}
  details{border:1px solid #2a3b66;border-radius:14px;padding:12px 14px;background:linear-gradient(180deg,#121d38,#0d1730)}
  summary{cursor:pointer;font-weight:900;letter-spacing:.2px;display:flex;align-items:center;gap:8px;list-style:none}
  summary::-webkit-details-marker{display:none}
  .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid #2a3b66;border-radius:999px;background:#0b1529;color:#a6b3d2;font-weight:800;font-size:12px}
  .cols{display:grid;gap:10px}
  @media(min-width:720px){.cols{grid-template-columns:1fr 1fr}}
  ul{margin:10px 0 0 16px;padding:0} li{margin:6px 0}
  code{background:#0a1327;border:1px solid rgba(255,255,255,.12);padding:2px 6px;border-radius:8px;font-family:ui-monospace,Consolas,monospace;font-weight:700;color:#cfe2ff}
  .foot{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-top:18px;color:var(--muted);font-weight:600;flex-wrap:wrap}
  .chip{display:inline-flex;gap:8px;align-items:center;padding:8px 10px;border-radius:999px;border:1px solid #2a3b66;background:linear-gradient(180deg,#121d38,#0d1730)}
  .chip .dot{width:8px;height:8px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent-2))}
  .tilt{transform-style:preserve-3d;perspective:800px}

  /* === Şifre Modalı === */
  .modal{position:fixed;inset:0;background:rgba(3,6,20,.65);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;z-index:50}
  .modal.open{display:flex}
  .modal-card{width:min(92vw,440px);background:linear-gradient(180deg,#0d1730,#0a1226);
    border:1px solid #2a3b66;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.55);padding:18px}
  .modal-title{font-weight:900;font-size:18px;margin:0 0 8px}
  .modal-sub{color:var(--muted);font-size:12px;margin-bottom:10px}
  .field{display:flex;gap:8px}
  .input{flex:1;background:#0a1327;border:1px solid rgba(255,255,255,.12);color:#fff;padding:10px 12px;border-radius:12px;min-height:44px;font-size:14px}
  .mbtn{border:none;border-radius:12px;padding:10px 14px;font-weight:900;min-height:44px;cursor:pointer;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#051025}
  .mghost{background:transparent;border:1px solid rgba(255,255,255,.15);color:#eaf1ff}
  .err{margin-top:8px;font-size:12px;color:var(--danger);min-height:16px}
  .ok{color:var(--ok)}
  @keyframes shake{10%,90%{transform:translateX(-2px)}20%,80%{transform:translateX(4px)}30%,50%,70%{transform:translateX(-6px)}40%,60%{transform:translateX(6px)}}
  .shake{animation:shake .4s both}
</style>
</head>
<body>
  <div class="stars"></div>

  <main class="wrap">
    <div class="card tilt" id="panel">
      <div class="brand"><span class="dot"></span> Fero — Sic Bo</div>
      <h1>🎲 Sic Bo • Small/Big • Öğrenen Çekirdek v2</h1>
      <p class="tagline">
        Flip-Flop Hold • <b>2xRule</b> • Bandit-Decay (Trend vs Mean) • Histerezis Kilit • Auto-Unit • Dinamik Stake Guardrail
      </p>

      <!-- Tek seçenek: Sic Bo (Artık JS ile yakalanacak) -->
      <a id="enterBtn" class="btn" href="fero-sicbo.html" data-href="fero-sicbo.html" rel="noopener">
        <span class="emoji">🎲</span>
        <span class="txt">
          <b>Fero Sic Bo'ya Gir</b>
          <small>Küçük/Büyük öneri motoru, KPI'lar, warm-up ve simülasyon</small>
        </span>
        <span class="badge">SICBO</span>
      </a>

      <div class="notice">
        <div class="icon">💡</div>
        <div>
          <!-- 📘 NASIL OYNANIR (EN ÜSTE EKLE) -->
<details id="howto" open style="border:1px solid #2a3b66;border-radius:14px;padding:12px 14px;background:linear-gradient(180deg,#121d38,#0d1730);margin:10px 0 18px">
  <summary style="cursor:pointer;font-weight:900;letter-spacing:.2px;display:flex;align-items:center;gap:8px;list-style:none">
    📘 Nasıl Oynanır (Adım Adım)
  </summary>

  <div style="display:grid;gap:10px;margin-top:8px">
    <ol style="margin:0 0 0 18px;padding:0">
      <li><b>Giriş:</b> “Fero Sic Bo’ya Gir” butonuna tıkla. Şifre istendiğinde doğru şifreyi girerek içeri geç.</li>
      <li><b>Warm-up (Kalibrasyon):</b> İlk ekranda <b>son 10 elin gerçek sonuçlarını</b> sırayla gir. Bu adım,
        motorun kısa dönem dengesini yakalaması için zorunludur. Tamamlanmadan öneri açılmaz.</li>
      <li><b>El Kaydı:</b> Her el bittiğinde çıkan sonuca göre <b>Small</b>, <b>Big</b> ya da <b>Tie</b> butonuna bas.
        Sistem bu verilerden öğrenir ve bir sonraki el için <b>“Dur / Küçüğe Oyna / Büyüğe Oyna”</b> önerisi ile
        <b>stake</b> miktarını otomatik hesaplar.</li>
      <li><b>Öneri Mantığı (Özet):</b>
        <ul style="margin:6px 0 0 16px">
          <li><b>2xRule:</b> Son iki aynı yön gelmişse aynı yöne öncelik verir.</li>
          <li><b>Flip-Flop Hold:</b> Küçük-Büyük dönüşümlü dalgalanma tespitinde geçici olarak <b>bekler</b>.</li>
          <li><b>Trend vs Mean:</b> Mini trend ile ortalamaya dönüş adayı birlikteyse, <b>Thompson Sampling</b> ile seçim yapılır.</li>
          <li><b>Histerezis Kilit:</b> Uzayan seri yönünde kilitler; karşı sinyal eşiği/durumunda çözülür.</li>
        </ul>
      </li>
      <li><b>Stake (Bahis) Yönetimi:</b>
        <ul style="margin:6px 0 0 16px">
          <li><b>Auto-Unit (u):</b> Başlangıç bankının yaklaşık %0.6’sından türetilir; kısa vadeli kazanım oranına göre mikro ayar yapılır.</li>
          <li><b>Kayıp Sonrası:</b> Drawdown’a göre hedefe yaklaşan kontrollü artış (<b>tek elde ≤ 2u</b> ve <b>≤ %35</b>; kilitte %25).</li>
          <li><b>Kazanç Sonrası:</b> HWM (tepe) korunur, kârdayken stake nazikçe küçültülür ve döngü sonunda tekrar <b>u</b>’ya döner.</li>
        </ul>
      </li>
      <li><b>KPI’ları Okuma:</b>
        <ul style="margin:6px 0 0 16px">
          <li><b>Öneri (Bu El):</b> O anki yön talimatı.</li>
          <li><b>Bank / HWM:</b> Mevcut kasa ve ulaşılan tepe değer.</li>
          <li><b>Stake (Sıradaki) & Dinamik Taban (u):</b> Bir sonraki el için miktar ve dinamik birim.</li>
          <li><b>W/L, PnL, Kayıp Serisi:</b> Kazan/kaybet sayısı, toplam kâr/zarar ve ardışık kayıp uzunluğu.</li>
          <li><b>WinRate(20) & Gölge PnL:</b> Son 20 bahisli el başarı yüzdesi ve “karşı yön olsaydı” varsayımsal sonuç.</li>
        </ul>
      </li>
      <li><b>Geçmiş Tablosu:</b> Her turda <b>Kaynak</b> (PAIR/LOCK/TREND/MEAN/PAUSE), <b>Öneri</b>, <b>Gerçek</b>,
        <b>Bahis</b>, <b>Sonuç</b>, <b>Net</b>, <b>Bank</b> bilgileri tutulur. Bu tabloyla strateji akışını izleyebilirsin.</li>
      <li><b>Toplu İçe Aktarım (Opsiyonel):</b> El sonuçlarını tek satırda <b>small/big/tie</b> biçiminde yapıştırıp simüle edebilirsin.
        Bu, algoritmayı hızla “ısındırmak” için idealdir.</li>
      <li><b>Geri Al / Temizle:</b> Hatalı kayıt durumunda <b>Geri Al</b>, gerektiğinde <b>Tüm Kayıtları Sil</b> ile sıfırdan başla.</li>
      <li><b>Ayarlar:</b> Sadece <b>Başlangıç Bank</b> girmen yeterli; <b>u</b> otomatik seçilir. Risk yönetimi ve yön önerisi tamamen otomatiktir.</li>
      <li><b>Pratik İpuçları:</b>
        <ul style="margin:6px 0 0 16px">
          <li>Warm-up’ı atlama; kısa dönem dengesi doğru kurulmadığında öneri kalitesi düşer.</li>
          <li>Uzun seri/kilit anlarında acele stake artırma; guardrail sınırları zaten artışı kademeli tutar.</li>
          <li>Gölge PnL’i izleyerek strateji tercihlerinin alternatifine göre farkını ölç.</li>
        </ul>
      </li>
    </ol>
  </div>
</details>
      </div>

      <!-- Detaylı Bilgi — (kısaltılmadı) -->
      <section class="info">
        <details open>
          <summary>🧠 Öğrenen Çekirdek v2 — Bileşenler</summary>
          <div class="cols">
            <div>
              <div class="pill">Flip-Flop Hold</div>
              <ul><li>Son 4 sinyal <code>Small-Big-Small-Big</code> ise iki aynı görülene kadar bekler.</li></ul>
              <div class="pill">2xRule (Öncelik)</div>
              <ul><li>Ardışık iki aynı yön görülürse o tarafa öncelik verir.</li></ul>
              <div class="pill">Z-Skor (Mean-Revert)</div>
              <ul>
                <li><b>W_SIGNAL</b> penceresinde z-skor hesaplar; eşik <code>Z_THR</code> adaptif.</li>
              </ul>
            </div>
            <div>
              <div class="pill">Trend vs Mean — Thompson Sampling</div>
              <ul><li>İki aday da varsa Beta çekilişiyle seçim yapar; decay uygulanır.</li></ul>
              <div class="pill">Histerezis Kilit</div>
              <ul><li>Mini-seride kilit kurar; karşı sinyal eşiği dolana kadar sürdürür.</li></ul>
              <div class="pill">Warm-up & Pencereler</div>
              <ul><li><b>MIN_WARMUP=10</b>, <b>W_WINRATE=20</b>.</li></ul>
            </div>
          </div>
        </details>

        <details>
          <summary>💵 Stake Sistemi — Auto-Unit & Guardrail</summary>
          <ul>
            <li>Başlangıç bankının ≈ %0.6’sından türetilen <b>u</b>; kısa vadeli win-rate ile mikro ayar.</li>
            <li>Kayıpta hedefe yaklaşım; tek elde <code>≤2u</code> ve <code>≤%35</code> artış sınırı (kilitte %25).</li>
          </ul>
        </details>

        <details>
          <summary>📊 KPI’lar & Tablo</summary>
          <ul><li>Öneri, Bank, Stake(u), HWM, W/L, PnL, Kayıp Serisi, WinRate(20), Gölge PnL vb.</li></ul>
        </details>

        <details>
          <summary>⚠️ Not</summary>
          <ul><li>Bu araç eğitim/analiz amaçlıdır; şans oyunlarında garanti yoktur.</li></ul>
        </details>
      </section>

      <footer class="foot">
        <span class="chip"><span class="dot"></span> Karanlık Cam Arayüz</span>
        <span class="chip">Fero Sic Bo • v1.1 • şifre korumalı</span>
      </footer>
    </div>
  </main>

  <!-- === Şifre Modalı === -->
  <div id="pwModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal-card" id="modalCard">
      <div class="modal-title">🔐 Giriş Şifresi</div>
      <div class="modal-sub">Devam etmek için şifreyi gir.</div>
      <form id="pwForm" class="field" autocomplete="off">
        <input id="pwInput" class="input" type="password" inputmode="text" placeholder="Şifre" required />
        <button class="mbtn" type="submit">Giriş</button>
        <button class="mbtn mghost" type="button" id="pwCancel">İptal</button>
      </form>
      <div id="pwErr" class="err" aria-live="polite"></div>
    </div>
  </div>

  <!--
    
  -->
  <template id="sec">
    {"p":["e3dd0e0e","b0234e46","f5fab0bf","96518d4a","eeeb8ef9","7499e624","989db1bc","d782f05f"],"o":[2,4,1,6,7,5,3,0],"s":"Fero@2025!"}
  </template>

<script>
  // Hafif 3D tilt (mobilde devre dışı)
  (() => {
    const card = document.getElementById('panel');
    const isTouch = matchMedia('(pointer: coarse)').matches;
    if (!card || isTouch) return;
    const strength = 10; let raf = null;
    const onMove = (e) => {
      const rect = card.getBoundingClientRect();
      const x = (e.clientX - rect.left) / rect.width;
      const y = (e.clientY - rect.top) / rect.height;
      const rY = (x - 0.5) * strength; const rX = (0.5 - y) * strength;
      cancelAnimationFrame(raf);
      raf = requestAnimationFrame(() => { card.style.transform = `rotateX(${rX}deg) rotateY(${rY}deg)`; });
    };
    const reset = () => { cancelAnimationFrame(raf); card.style.transform = 'rotateX(0deg) rotateY(0deg)'; };
    card.addEventListener('mousemove', onMove, {passive:true});
    card.addEventListener('mouseleave', reset, {passive:true});
  })();

  // ===== Şifre Kilidi =====
  (()=>{
    const btn = document.getElementById('enterBtn');
    const modal = document.getElementById('pwModal');
    const form = document.getElementById('pwForm');
    const input = document.getElementById('pwInput');
    const err = document.getElementById('pwErr');
    const cancel = document.getElementById('pwCancel');
    const modalCard = document.getElementById('modalCard');
    const DEST = btn?.dataset?.href || btn?.getAttribute('href') || 'fero-sicbo.html';

    // Oturum açık mı? (sayfa yenilemelerinde tekrar sormasın)
    const KEY = 'fero_sicbo_auth';
    if (sessionStorage.getItem(KEY) === 'ok') {
      // butona basınca doğrudan geçsin
    }

    // Hash helper (SHA-256 hex)
    async function sha256Hex(txt){
      const enc = new TextEncoder().encode(txt);
      const buf = await crypto.subtle.digest('SHA-256', enc);
      const arr = Array.from(new Uint8Array(buf));
      return arr.map(b=>b.toString(16).padStart(2,'0')).join('');
    }

    // Gizli parçaları oku ve doğru hash dizisini kur
    function getExpectedHash(){
      try{
        const raw = document.getElementById('sec').content.textContent.trim();
        const json = JSON.parse(raw);
        const p = json.p;         // parçalar (karışık)
        const order = json.o;     // doğru sıra indexleri
        const salt = json.s;      // salt
        // order sırasına göre parçaları birleştir
        const joined = order.map(i=>p[i]).join('');
        return {hashHex: joined, salt};
      }catch(e){ return {hashHex:'', salt:''}; }
    }

    // Güvenli karşılaştırma (zaman sabitine yakın)
    function equalHexSafe(a,b){
      if (a.length !== b.length) return false;
      let out = 0;
      for (let i=0;i<a.length;i++){ out |= a.charCodeAt(i) ^ b.charCodeAt(i); }
      return out === 0;
    }

    function openModal(){
      modal.classList.add('open');
      modal.setAttribute('aria-hidden','false');
      requestAnimationFrame(()=>input.focus());
    }
    function closeModal(){
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden','true');
      input.value=''; err.textContent='';
    }

    btn.addEventListener('click', (e)=>{
      // Eğer oturum onaylıysa direkt git
      if (sessionStorage.getItem(KEY) === 'ok') return;
      e.preventDefault();
      openModal();
    });

    cancel.addEventListener('click', ()=>{ closeModal(); });

    modal.addEventListener('click', (e)=>{
      if (e.target === modal) closeModal();
    });

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const {hashHex, salt} = getExpectedHash();
      const val = input.value || '';
      err.textContent = 'Doğrulanıyor...';
      const got = await sha256Hex(val + salt);
      if (equalHexSafe(got, hashHex)){
        err.textContent = '✔ Doğru şifre. Yönlendiriliyor...';
        err.classList.remove('shake'); err.classList.add('ok');
        sessionStorage.setItem(KEY, 'ok');
        // küçük gecikme -> görsel onay
        setTimeout(()=>{ window.location.href = DEST; }, 250);
      } else {
        err.textContent = 'Hatalı şifre!';
        err.classList.remove('ok'); err.classList.add('shake');
        modalCard.classList.remove('shake'); void modalCard.offsetWidth; modalCard.classList.add('shake');
        input.select();
      }
    });

    // Klavye kaçışı
    document.addEventListener('keydown', (e)=>{
      if (e.key === 'Escape' && modal.classList.contains('open')) closeModal();
    });
  })();
</script>
</body>
</html>
